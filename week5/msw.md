# 5주차 MSW

## 학습 키워드

- Service worker
- MSW(Mock Service Worker)
- polyfill(폴리필)

## Service worker

> **서비스워커(Service worker)**는 브라우저가 백그라운드에서 실행하는 스크립트로, 웹페이지와는 별개로 작동하며 웹페이지 또는 사용자의 인터랙션이 필요하지 않은 기능만 제공하고 있다.

## MSW(Mock Service Worker)

> **MSW**는 서비스 워커(Service Worker)를 사용하여 네트워크 호출을 가로채는 **API 모킹(mocking)**하며,브라우저에서 마치 백엔드 API인 척하며 네트워크 요청을 가로채고 특정한 동작 수행하도록 지정해준다.

### 동작 순서

1. 브라우저에서 요청 발생
2. 서비스 워커가 이를 가로챈 뒤 요청을 복제
3. MSW로 전송
4. MSW에서 이벤트 감지
5. handler에 등록된 이벤트에 해당하는지 확인
6. 미리 지정한 "가짜 응답" 브라우저에 전송

### 장점

- Network level에서의 interception이므로, Client 단에서 구현 가능한 가장 최상위의 API 모킹이 가능하며 실제 브라우저 개발자도구 네트워크 탭에도 응답값이 표시됨
- CSR과 SSR 모두 지원합니다. 각각 setupWorker, setupServer 메소드로 구현 가능
- REST API & GraphQL 모두 지원

## polyfill(폴리필)

> 브라우저에서 지원하지 않는 코드를 사용 가능한 코드 조각이나 플러그인으로 변환된 코드를 의미한다.
> 즉, 최신 자바스크립트의 기능을 구식 자바스크립트 코드로 똑같이 구현한 코드라고 생각하면 된다.

> 💡 [Pollyfill.io](http://Pollyfill.io) 공식 레퍼런스
> 세계적으로 다양한 브라우저와 브라우저 버전을 사용하고 있으며, 각 브라우저에는 나머지 기능 집합이 약간씩 다릅니다. 이것은 브라우저용 개발을 어려운 작업으로 만들 수 있습니다. 인기 있는 브라우저의 최신 버전은 이전 브라우저에서 할 수 없는 많은 작업을 수행할 수 있지만 여전히 이전 브라우저를 지원해야 할 수도 있습니다. Polyfill.io를 사용하면 누락된 기능을 polifill로 다시 생성하여 다양한 브라우저를 더 쉽게 지원할 수 있습니다. 지원하는 브라우저와 지원하지 않는 브라우저에서 최신 기능을 사용할 수 있습니다.
