# 5주차 Playwright

## 학습 키워드

- E2E(End to End) Test
- Headless Chrome
- Puppeteer
- Playwright
- CodeceptJS

## E2E(End to End) Test

> E2E Test는 종단(Endpoint) 간 테스트로 사용자의 입장에서 테스트 하는 방법이다. 페이지에서 원하는 텍스트가 제대로 출력이 되었는지, 버튼을 클릭 했을 때 올바른 동작을 수행하는 지 등을 테스트한다.

- **Endpoint(종단)** 간 테스트로 **사용자의 입장에서 사용자가 사용하는 상황**을 가정하고 테스트 하는 것
- 일반적으로 웹이나 어플 등에서 GUI를 통해 시나리오, 기능 테스트 등을 수행한다.
- 사용자에게 직접적으로 노출되는 부분을 점검한다.
- 유닛 테스트로 불가능한 **사용자 관점의 테스트**까지 가능하다.
- Endpoint 테스트를 통과하면 기능이 잘 작동한다는 것이다.
- **백엔드 관점**에서 개발한 **REST API를 테스트** 하기 위해 실제로 서버에 요청을 보낸 뒤 클라이언트에서 원하는 데이터가 전송되는 지 확인해야 한다.

## Headless Chrome

> **Headless Chrome**은 구글 크롬 브라우저의 GUI가 없는 버전이라고 생각하면 된다. 이 버전은 주로 **웹사이트의 자동화 테스트**, 웹 크롤링 또는 스크린샷 생성 등 서버 측에서의 작업을 위해 사용된다. 사용자 인터페이스가 없기 때문에, Headless Chrome은 **명령어와 코드로 작동**하며, 리소스 소모가 적고 효율적이다. 크롬 개발 도구(Chrome Developer Tools)와 연동하여 많은 기능을 활용할 수도 있다. 대표적으로 Puppeteer, Selenium 등 여러가지 **자바스크립트 라이브러리를 이용하여 Headless Chrome을 제어**할 수 있다.

## Puppeteer

> **Puppeteer**는 Headless Chrome를 사용하여 웹 페이지에 대한 다양한 테스트를 진행할 수 있다. 예를 들어 사용자 인터페이스, 호환성, 성능, 접근성 등에 대한 테스트가 가능하다.

### Puppeteer로 가능한 작업

1. 웹페이지에 대한 자동화 테스트: 페이지 로딩, 버튼 클릭, 폼 제출 등의 동작을 테스트할 수 있습니다.
2. 스크린샷 및 PDF 생성: 웹페이지의 내용을 이미지나 PDF 형식으로 저장할 수 있습니다.
3. 웹크롤링 및 스크레이핑: 웹사이트의 정보를 수집하거나 데이터를 추출할 수 있습니다.
4. 페이지 성능 모니터링: 웹페이지의 로딩 시간, 성능 지표 등을 분석하고 최적화할 수 있습니다.

## Playwright

> **Playwright**는 \*\*\*\*Microsoft에서 개발한 Node.js 라이브러리로, 웹 브라우저 기반 E2E 테스트 자동화, 엔드 투 엔드(E2E) 테스트를 수행하는 데 사용된다. Playwright는 크로스 브라우저 테스트를 강력하게 지원하며, 여러 브라우저(Chrome, Firefox, Safari 등)와 브라우저 메트릭을 활용하여 개발자들에게 웹 애플리케이션 테스트를 도와준다.

### Playwright로 가능한 작업

1. 브라우저 자동화: 웹페이지를 로딩, 요소 접근, 이벤트 시뮬레이션 등 다양한 작업을 수행할 수 있다.
2. 네트워크 제어: HTTP 요청 및 응답을 가로채거나 조작하여, 테스트 과정에서 네트워크를 통한 상호작용을 검증할 수 있다.
3. 테스트 환경 설정: 모바일 환경, 시간대, 국제화 등 다양한 환경을 설정하며 테스트를 수행할 수 있다.

## CodeceptJS

> **CodeceptJS**는 웹 애플리케이션의 사용자 시나리오에 대한 **종합적인 테스트를 수행**할 수 있는 엔드 투 엔드(E2E) 테스트 프레임워크이다. 자바스크립트를 사용하여 테스트를 작성하며, 다양한 테스트 도구와 웹 드라이버를 통합하여 사용할 수 있다. 예를 들어, **Puppeteer**, WebDriver, Protractor, TestCafe, Nightmare 등과 같은 테스트 도구를 사용할 수 있다.
> 테스트 작성 시, 시나리오를 **순차적인 명령어로 정리**하고 **BDD**(Behavior Driven Development) 스타일로 작성할 수 있어, 테스트를 **이해하고 수정하기 쉬워지는 장점**이 있다.

간단한 서비스는 CodeceptJS로 커버 가능하고 복잡해지면 Playwrigth을 쓰면 좋을 것 같다.

>
